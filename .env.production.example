# ========================================
# FISIOFLOW - PRODUÇÃO DIGITALOCEAN
# ========================================
# Este arquivo contém todas as variáveis necessárias para deploy no DigitalOcean App Platform
# Copie para .env.production e configure os valores reais

# ========================================
# AMBIENTE E APLICAÇÃO
# ========================================
NODE_ENV=production
NEXT_TELEMETRY_DISABLED=1
PORT=3000
HOSTNAME=0.0.0.0

# URL da aplicação (será fornecida pelo DigitalOcean)
NEXTAUTH_URL=https://your-app-name.ondigitalocean.app

# ========================================
# BANCO DE DADOS - DIGITALOCEAN MANAGED DATABASE
# ========================================
# URL principal do banco (fornecida pelo DigitalOcean)
DATABASE_URL="postgresql://username:password@host:25060/database?sslmode=require&pool_timeout=30&connect_timeout=30"

# URL direta para migrações (mesma URL para DigitalOcean)
DIRECT_URL="postgresql://username:password@host:25060/database?sslmode=require&connect_timeout=30"

# Configurações de pool otimizadas para DigitalOcean
DB_POOL_SIZE=10
DB_CONNECTION_TIMEOUT=30000
DB_IDLE_TIMEOUT=600000
DB_MAX_CONNECTIONS=10
DB_MIN_CONNECTIONS=2

# ========================================
# AUTENTICAÇÃO - NEXTAUTH
# ========================================
# Gere uma chave secreta forte: openssl rand -base64 32
NEXTAUTH_SECRET=your_super_secure_nextauth_secret_here_32_chars_minimum

# ========================================
# PROVEDORES DE IA (OPCIONAL)
# ========================================
# Descomente e configure apenas os que você usar
# OPENAI_API_KEY=sk-your_openai_api_key_here
# ANTHROPIC_API_KEY=sk-ant-your_anthropic_api_key_here
# GEMINI_API_KEY=your_gemini_api_key_here

# ========================================
# REDIS - DIGITALOCEAN MANAGED REDIS (OPCIONAL)
# ========================================
# Se você configurar Redis no DigitalOcean
# REDIS_URL=rediss://username:password@host:25061
# REDIS_TLS_ENABLED=true

# ========================================
# EMAIL - CONFIGURAÇÃO SMTP (OPCIONAL)
# ========================================
# Configure apenas se usar funcionalidades de email
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_SECURE=false
# SMTP_USER=your_email@gmail.com
# SMTP_PASS=your_app_password_here

# ========================================
# DIGITALOCEAN SPACES (OPCIONAL)
# ========================================
# Para armazenamento de arquivos (equivalente ao S3)
# DO_SPACES_KEY=your_spaces_access_key
# DO_SPACES_SECRET=your_spaces_secret_key
# DO_SPACES_ENDPOINT=https://nyc3.digitaloceanspaces.com
# DO_SPACES_BUCKET=your-bucket-name
# DO_SPACES_REGION=nyc3

# ========================================
# MONITORAMENTO E LOGS
# ========================================
LOG_LEVEL=info
HEALTH_CHECK_ENABLED=true
RATE_LIMIT_ENABLED=true
CORS_ENABLED=true

# ========================================
# CACHE E PERFORMANCE
# ========================================
ROUTE_CACHE_ENABLED=true
ROUTE_CACHE_TTL=300
IMAGE_CACHE_TTL=31536000

# Otimizações para produção
COMPRESSION_ENABLED=true
STATIC_CACHE_TTL=86400

# ========================================
# SEGURANÇA
# ========================================
# Token para health checks (gere um aleatório)
STATUS_CHECK_TOKEN=your_random_status_check_token_here

# Chave de criptografia (32 caracteres)
ENCRYPTION_KEY=your_32_character_encryption_key_here

# CORS origins permitidas (adicione seu domínio)
CORS_ORIGINS=https://your-app-name.ondigitalocean.app,https://your-custom-domain.com

# ========================================
# DIGITALOCEAN ESPECÍFICO
# ========================================
# Configurações específicas da plataforma
DO_APP_NAME=fisioflow
DO_REGION=nyc1
DO_ENVIRONMENT=production

# Build settings
BUILD_COMMAND="npm run build"
RUN_COMMAND="npm start"

# ========================================
# BACKUP E MANUTENÇÃO
# ========================================
# Configurações para backup automático
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"
BACKUP_RETENTION_DAYS=30

# ========================================
# INSTRUÇÕES DE CONFIGURAÇÃO
# ========================================
# 1. Copie este arquivo para .env.production
# 2. Configure DATABASE_URL com os dados do seu Managed Database
# 3. Configure NEXTAUTH_URL com sua URL do DigitalOcean
# 4. Gere NEXTAUTH_SECRET: openssl rand -base64 32
# 5. Configure apenas as integrações que você usar (IA, Email, etc.)
# 6. No DigitalOcean App Platform, adicione estas variáveis em Environment Variables
# 7. Certifique-se de que o banco está na mesma região da aplicação

# ========================================
# PLANOS RECOMENDADOS DIGITALOCEAN
# ========================================
# App Platform: Professional ($25/mês)
# - 2 vCPUs, 4GB RAM
# - Escalabilidade automática
# - SSL/TLS automático
# - Domínio personalizado
# - Logs e métricas
#
# Managed Database: Basic ($15/mês)
# - 1 vCPU, 1GB RAM
# - 10GB SSD
# - Backups automáticos
# - SSL/TLS
# - Monitoramento
#
# Total: ~$40/mês (~R$200/mês)

# ========================================
# NOTAS DE SEGURANÇA
# ========================================
# - NUNCA commite arquivos .env no repositório
# - Use variáveis de ambiente do DigitalOcean App Platform
# - Mantenha backups das configurações
# - Monitore logs regularmente
# - Atualize dependências periodicamente