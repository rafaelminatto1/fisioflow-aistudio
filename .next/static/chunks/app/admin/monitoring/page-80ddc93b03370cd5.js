(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[232],{62964:function(e,t,s){Promise.resolve().then(s.bind(s,78266))},65613:function(e,t,s){"use strict";s.d(t,{X:function(){return d},bZ:function(){return c}});var r=s(57437),a=s(2265),n=s(90535),i=s(94508);let l=(0,n.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),c=a.forwardRef((e,t)=>{let{className:s,variant:a,...n}=e;return(0,r.jsx)("div",{ref:t,role:"alert",className:(0,i.cn)(l({variant:a}),s),...n})});c.displayName="Alert",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("h5",{ref:t,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",s),...a})}).displayName="AlertTitle";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",s),...a})});d.displayName="AlertDescription"},35974:function(e,t,s){"use strict";s.d(t,{C:function(){return l}});var r=s(57437);s(2265);var a=s(90535),n=s(94508);let i=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:s,...a}=e;return(0,r.jsx)("div",{className:(0,n.cn)(i({variant:s}),t),...a})}},62869:function(e,t,s){"use strict";s.d(t,{z:function(){return i}});var r=s(57437),a=s(2265),n=s(94508);let i=a.forwardRef((e,t)=>{let{className:s,variant:a="default",size:i="default",...l}=e;return(0,r.jsx)("button",{className:(0,n.cn)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"underline-offset-4 hover:underline text-primary"}[a],{default:"h-10 py-2 px-4",sm:"h-9 px-3 rounded-md",lg:"h-11 px-8 rounded-md",icon:"h-10 w-10"}[i],s),ref:t,...l})});i.displayName="Button"},66070:function(e,t,s){"use strict";s.d(t,{Ol:function(){return l},SZ:function(){return d},Zb:function(){return i},aY:function(){return o},ll:function(){return c}});var r=s(57437),a=s(2265),n=s(94508);let i=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a})});i.displayName="Card";let l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...a})});l.displayName="CardHeader";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),...a})});c.displayName="CardTitle";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...a})});d.displayName="CardDescription";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...a})});o.displayName="CardContent",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...a})}).displayName="CardFooter"},78266:function(e,t,s){"use strict";s.d(t,{MonitoringDashboard:function(){return K}});var r=s(57437),a=s(2265),n=s(66070),i=s(35974),l=s(62869),c=s(65613),d=s(47625),o=s(21156),x=s(56940),m=s(97059),u=s(2027),f=s(77719),h=s(52797),j=s(5481),g=s(88822),p=s(77031),v=s(89293),y=s(41671),b=s(76865),N=s(99388),w=s(42488),Z=s(82431),k=s(50091),C=s(14822),R=s(11239),A=s(84428);function K(e){let{className:t}=e,[s,K]=(0,a.useState)([]),[D,S]=(0,a.useState)([]),[T,Y]=(0,a.useState)({status:"healthy",activeAlerts:0,lastMetrics:null}),[M,O]=(0,a.useState)(!0),[U,_]=(0,a.useState)(!0),z=async()=>{try{let[e,t,s]=await Promise.all([fetch("/api/neon/metrics?action=getMetrics&limit=50"),fetch("/api/neon/metrics?action=getAlerts"),fetch("/api/neon/metrics?action=getHealth")]);if(e.ok){let t=await e.json();K(t.metrics||[])}if(t.ok){let e=await t.json();S(e.alerts||[])}if(s.ok){let e=await s.json();Y(e.health||{status:"healthy",activeAlerts:0,lastMetrics:null})}}catch(e){console.error("Erro ao buscar dados do monitoramento:",e)}finally{O(!1)}};(0,a.useEffect)(()=>{if(z(),U){let e=setInterval(z,3e4);return()=>clearInterval(e)}},[U]);let E=s.map(e=>({time:new Date(e.timestamp).toLocaleTimeString(),cpu:e.compute.cpu,memory:e.compute.memory/1024,connections:e.database.connections.active,responseTime:e.api.responseTime,errorRate:e.database.performance.errorRate,storage:e.database.storage.percentage})),P=T.lastMetrics;return M?(0,r.jsxs)("div",{className:"flex items-center justify-center h-64",children:[(0,r.jsx)(Z.Z,{className:"h-8 w-8 animate-spin"}),(0,r.jsx)("span",{className:"ml-2",children:"Carregando m\xe9tricas..."})]}):(0,r.jsxs)("div",{className:"space-y-6 ".concat(t),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(k.Z,{className:"h-8 w-8 text-blue-600"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"Neon DB Monitoring"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Real-time database performance metrics"})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)(l.z,{variant:U?"default":"outline",onClick:()=>_(!U),size:"sm",children:[(0,r.jsx)(Z.Z,{className:"h-4 w-4 mr-2 ".concat(U?"animate-spin":"")}),"Auto Refresh"]}),(0,r.jsxs)(l.z,{onClick:z,variant:"outline",size:"sm",children:[(0,r.jsx)(Z.Z,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,r.jsx)(n.Zb,{children:(0,r.jsx)(n.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Status Geral"}),(0,r.jsx)("p",{className:"text-2xl font-bold ".concat((e=>{switch(e){case"healthy":return"text-green-600";case"warning":return"text-yellow-600";case"critical":return"text-red-600";default:return"text-gray-600"}})(T.status)),children:T.status.charAt(0).toUpperCase()+T.status.slice(1)})]}),(e=>{switch(e){case"healthy":return(0,r.jsx)(y.Z,{className:"h-5 w-5 text-green-600"});case"warning":return(0,r.jsx)(b.Z,{className:"h-5 w-5 text-yellow-600"});case"critical":return(0,r.jsx)(N.Z,{className:"h-5 w-5 text-red-600"});default:return(0,r.jsx)(w.Z,{className:"h-5 w-5 text-gray-600"})}})(T.status)]})})}),(0,r.jsx)(n.Zb,{children:(0,r.jsx)(n.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Alertas Ativos"}),(0,r.jsx)("p",{className:"text-2xl font-bold",children:T.activeAlerts})]}),(0,r.jsx)(b.Z,{className:"h-5 w-5 text-yellow-600"})]})})}),(0,r.jsx)(n.Zb,{children:(0,r.jsx)(n.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"CPU Usage"}),(0,r.jsxs)("p",{className:"text-2xl font-bold",children:[(null==P?void 0:P.compute.cpu)||0,"%"]})]}),(0,r.jsx)(C.Z,{className:"h-5 w-5 text-blue-600"})]})})}),(0,r.jsx)(n.Zb,{children:(0,r.jsx)(n.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Connections"}),(0,r.jsx)("p",{className:"text-2xl font-bold",children:(null==P?void 0:P.database.connections.active)||0})]}),(0,r.jsx)(k.Z,{className:"h-5 w-5 text-green-600"})]})})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)(n.Zb,{children:[(0,r.jsx)(n.Ol,{children:(0,r.jsxs)(n.ll,{className:"flex items-center",children:[(0,r.jsx)(C.Z,{className:"h-5 w-5 mr-2"}),"CPU & Memory Usage"]})}),(0,r.jsx)(n.aY,{children:(0,r.jsx)(d.h,{width:"100%",height:300,children:(0,r.jsxs)(o.w,{data:E,children:[(0,r.jsx)(x.q,{strokeDasharray:"3 3"}),(0,r.jsx)(m.K,{dataKey:"time"}),(0,r.jsx)(u.Q,{}),(0,r.jsx)(f.u,{}),(0,r.jsx)(h.x,{type:"monotone",dataKey:"cpu",stroke:"#3b82f6",name:"CPU %"}),(0,r.jsx)(h.x,{type:"monotone",dataKey:"memory",stroke:"#10b981",name:"Memory GB"})]})})})]}),(0,r.jsxs)(n.Zb,{children:[(0,r.jsx)(n.Ol,{children:(0,r.jsxs)(n.ll,{className:"flex items-center",children:[(0,r.jsx)(R.Z,{className:"h-5 w-5 mr-2"}),"Response Time"]})}),(0,r.jsx)(n.aY,{children:(0,r.jsx)(d.h,{width:"100%",height:300,children:(0,r.jsxs)(j.T,{data:E,children:[(0,r.jsx)(x.q,{strokeDasharray:"3 3"}),(0,r.jsx)(m.K,{dataKey:"time"}),(0,r.jsx)(u.Q,{}),(0,r.jsx)(f.u,{}),(0,r.jsx)(g.uN,{type:"monotone",dataKey:"responseTime",stroke:"#f59e0b",fill:"#fbbf24",name:"Response Time (ms)"})]})})})]}),(0,r.jsxs)(n.Zb,{children:[(0,r.jsx)(n.Ol,{children:(0,r.jsxs)(n.ll,{className:"flex items-center",children:[(0,r.jsx)(k.Z,{className:"h-5 w-5 mr-2"}),"Database Connections"]})}),(0,r.jsx)(n.aY,{children:(0,r.jsx)(d.h,{width:"100%",height:300,children:(0,r.jsxs)(p.v,{data:E,children:[(0,r.jsx)(x.q,{strokeDasharray:"3 3"}),(0,r.jsx)(m.K,{dataKey:"time"}),(0,r.jsx)(u.Q,{}),(0,r.jsx)(f.u,{}),(0,r.jsx)(v.$,{dataKey:"connections",fill:"#8b5cf6",name:"Active Connections"})]})})})]}),(0,r.jsxs)(n.Zb,{children:[(0,r.jsx)(n.Ol,{children:(0,r.jsxs)(n.ll,{className:"flex items-center",children:[(0,r.jsx)(A.Z,{className:"h-5 w-5 mr-2"}),"Storage Usage"]})}),(0,r.jsx)(n.aY,{children:(0,r.jsx)(d.h,{width:"100%",height:300,children:(0,r.jsxs)(j.T,{data:E,children:[(0,r.jsx)(x.q,{strokeDasharray:"3 3"}),(0,r.jsx)(m.K,{dataKey:"time"}),(0,r.jsx)(u.Q,{}),(0,r.jsx)(f.u,{}),(0,r.jsx)(g.uN,{type:"monotone",dataKey:"storage",stroke:"#ef4444",fill:"#fca5a5",name:"Storage %"})]})})})]})]}),D.length>0&&(0,r.jsxs)(n.Zb,{children:[(0,r.jsx)(n.Ol,{children:(0,r.jsxs)(n.ll,{className:"flex items-center",children:[(0,r.jsx)(b.Z,{className:"h-5 w-5 mr-2"}),"Active Alerts"]})}),(0,r.jsx)(n.aY,{children:(0,r.jsx)("div",{className:"space-y-3",children:D.map(e=>(0,r.jsx)(c.bZ,{className:"border-l-4 ".concat("critical"===e.type?"border-red-500":"warning"===e.type?"border-yellow-500":"border-blue-500"),children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:["critical"===e.type?(0,r.jsx)(N.Z,{className:"h-5 w-5 text-red-600"}):(0,r.jsx)(b.Z,{className:"h-5 w-5 text-yellow-600"}),(0,r.jsxs)("div",{children:[(0,r.jsx)(c.X,{className:"font-medium",children:e.message}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:new Date(e.timestamp).toLocaleString()})]})]}),(0,r.jsx)(i.C,{variant:"critical"===e.type?"destructive":"secondary",children:e.type})]})},e.id))})})]})]})}},94508:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var r=s(61994),a=s(53335);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.m6)((0,r.W)(t))}}},function(e){e.O(0,[216,744],function(){return e(e.s=62964)}),_N_E=e.O()}]);