(()=>{var e={};e.id=232,e.ids=[232],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},98216:e=>{"use strict";e.exports=require("net")},74026:e=>{"use strict";e.exports=require("string_decoder")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},62529:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>h,tree:()=>d}),a(30637),a(32773),a(43188),a(35866);var t=a(23191),r=a(88716),i=a(37922),l=a.n(i),n=a(95231),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);a.d(s,c);let d=["",{children:["admin",{children:["monitoring",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,30637)),"C:\\Users\\amand\\Rafael\\aifisio\\fisioflow-aistudio\\app\\admin\\monitoring\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,32773)),"C:\\Users\\amand\\Rafael\\aifisio\\fisioflow-aistudio\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,43188)),"C:\\Users\\amand\\Rafael\\aifisio\\fisioflow-aistudio\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Users\\amand\\Rafael\\aifisio\\fisioflow-aistudio\\app\\admin\\monitoring\\page.tsx"],x="/admin/monitoring/page",m={require:a,loadChunk:()=>Promise.resolve()},h=new t.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/monitoring/page",pathname:"/admin/monitoring",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},22277:(e,s,a)=>{Promise.resolve().then(a.bind(a,68344))},43273:(e,s,a)=>{"use strict";a.d(s,{X:()=>d,bZ:()=>c});var t=a(10326),r=a(17577),i=a(79360),l=a(77863);let n=(0,i.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),c=r.forwardRef(({className:e,variant:s,...a},r)=>t.jsx("div",{ref:r,role:"alert",className:(0,l.cn)(n({variant:s}),e),...a}));c.displayName="Alert",r.forwardRef(({className:e,...s},a)=>t.jsx("h5",{ref:a,className:(0,l.cn)("mb-1 font-medium leading-none tracking-tight",e),...s})).displayName="AlertTitle";let d=r.forwardRef(({className:e,...s},a)=>t.jsx("div",{ref:a,className:(0,l.cn)("text-sm [&_p]:leading-relaxed",e),...s}));d.displayName="AlertDescription"},33071:(e,s,a)=>{"use strict";a.d(s,{Ol:()=>n,SZ:()=>d,Zb:()=>l,aY:()=>o,ll:()=>c});var t=a(10326),r=a(17577),i=a(77863);let l=r.forwardRef(({className:e,...s},a)=>t.jsx("div",{ref:a,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));l.displayName="Card";let n=r.forwardRef(({className:e,...s},a)=>t.jsx("div",{ref:a,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...s}));n.displayName="CardHeader";let c=r.forwardRef(({className:e,...s},a)=>t.jsx("h3",{ref:a,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...s}));c.displayName="CardTitle";let d=r.forwardRef(({className:e,...s},a)=>t.jsx("p",{ref:a,className:(0,i.cn)("text-sm text-muted-foreground",e),...s}));d.displayName="CardDescription";let o=r.forwardRef(({className:e,...s},a)=>t.jsx("div",{ref:a,className:(0,i.cn)("p-6 pt-0",e),...s}));o.displayName="CardContent",r.forwardRef(({className:e,...s},a)=>t.jsx("div",{ref:a,className:(0,i.cn)("flex items-center p-6 pt-0",e),...s})).displayName="CardFooter"},68344:(e,s,a)=>{"use strict";a.d(s,{MonitoringDashboard:()=>A});var t=a(10326),r=a(17577),i=a(33071),l=a(567),n=a(90772),c=a(43273),d=a(30660),o=a(14958),x=a(18423),m=a(62637),h=a(12062),j=a(3950),f=a(72462),u=a(10669),p=a(80679),g=a(49844),N=a(59855),b=a(30361),y=a(50949),v=a(69669),w=a(66697),C=a(21405),Z=a(88319),R=a(71208),P=a(3634),k=a(55002);function A({className:e}){let[s,a]=(0,r.useState)([]),[A,S]=(0,r.useState)([]),[q,D]=(0,r.useState)({status:"healthy",activeAlerts:0,lastMetrics:null}),[M,U]=(0,r.useState)(!0),[_,Y]=(0,r.useState)(!0),T=async()=>{try{let[e,s,t]=await Promise.all([fetch("/api/neon/metrics?action=getMetrics&limit=50"),fetch("/api/neon/metrics?action=getAlerts"),fetch("/api/neon/metrics?action=getHealth")]);if(e.ok){let s=await e.json();a(s.metrics||[])}if(s.ok){let e=await s.json();S(e.alerts||[])}if(t.ok){let e=await t.json();D(e.health||{status:"healthy",activeAlerts:0,lastMetrics:null})}}catch(e){console.error("Erro ao buscar dados do monitoramento:",e)}finally{U(!1)}},K=s.map(e=>({time:new Date(e.timestamp).toLocaleTimeString(),cpu:e.compute.cpu,memory:e.compute.memory/1024,connections:e.database.connections.active,responseTime:e.api.responseTime,errorRate:e.database.performance.errorRate,storage:e.database.storage.percentage})),O=q.lastMetrics;return M?(0,t.jsxs)("div",{className:"flex items-center justify-center h-64",children:[t.jsx(C.Z,{className:"h-8 w-8 animate-spin"}),t.jsx("span",{className:"ml-2",children:"Carregando m\xe9tricas..."})]}):(0,t.jsxs)("div",{className:`space-y-6 ${e}`,children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[t.jsx(Z.Z,{className:"h-8 w-8 text-blue-600"}),(0,t.jsxs)("div",{children:[t.jsx("h1",{className:"text-2xl font-bold",children:"Neon DB Monitoring"}),t.jsx("p",{className:"text-gray-600",children:"Real-time database performance metrics"})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsxs)(n.z,{variant:_?"default":"outline",onClick:()=>Y(!_),size:"sm",children:[t.jsx(C.Z,{className:`h-4 w-4 mr-2 ${_?"animate-spin":""}`}),"Auto Refresh"]}),(0,t.jsxs)(n.z,{onClick:T,variant:"outline",size:"sm",children:[t.jsx(C.Z,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsx(i.Zb,{children:t.jsx(i.aY,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Status Geral"}),t.jsx("p",{className:`text-2xl font-bold ${(e=>{switch(e){case"healthy":return"text-green-600";case"warning":return"text-yellow-600";case"critical":return"text-red-600";default:return"text-gray-600"}})(q.status)}`,children:q.status.charAt(0).toUpperCase()+q.status.slice(1)})]}),(e=>{switch(e){case"healthy":return t.jsx(b.Z,{className:"h-5 w-5 text-green-600"});case"warning":return t.jsx(y.Z,{className:"h-5 w-5 text-yellow-600"});case"critical":return t.jsx(v.Z,{className:"h-5 w-5 text-red-600"});default:return t.jsx(w.Z,{className:"h-5 w-5 text-gray-600"})}})(q.status)]})})}),t.jsx(i.Zb,{children:t.jsx(i.aY,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Alertas Ativos"}),t.jsx("p",{className:"text-2xl font-bold",children:q.activeAlerts})]}),t.jsx(y.Z,{className:"h-5 w-5 text-yellow-600"})]})})}),t.jsx(i.Zb,{children:t.jsx(i.aY,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"CPU Usage"}),(0,t.jsxs)("p",{className:"text-2xl font-bold",children:[O?.compute.cpu||0,"%"]})]}),t.jsx(R.Z,{className:"h-5 w-5 text-blue-600"})]})})}),t.jsx(i.Zb,{children:t.jsx(i.aY,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Connections"}),t.jsx("p",{className:"text-2xl font-bold",children:O?.database.connections.active||0})]}),t.jsx(Z.Z,{className:"h-5 w-5 text-green-600"})]})})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)(i.Zb,{children:[t.jsx(i.Ol,{children:(0,t.jsxs)(i.ll,{className:"flex items-center",children:[t.jsx(R.Z,{className:"h-5 w-5 mr-2"}),"CPU & Memory Usage"]})}),t.jsx(i.aY,{children:t.jsx(d.h,{width:"100%",height:300,children:(0,t.jsxs)(o.w,{data:K,children:[t.jsx(x.q,{strokeDasharray:"3 3"}),t.jsx(m.K,{dataKey:"time"}),t.jsx(h.Q,{}),t.jsx(j.u,{}),t.jsx(f.x,{type:"monotone",dataKey:"cpu",stroke:"#3b82f6",name:"CPU %"}),t.jsx(f.x,{type:"monotone",dataKey:"memory",stroke:"#10b981",name:"Memory GB"})]})})})]}),(0,t.jsxs)(i.Zb,{children:[t.jsx(i.Ol,{children:(0,t.jsxs)(i.ll,{className:"flex items-center",children:[t.jsx(P.Z,{className:"h-5 w-5 mr-2"}),"Response Time"]})}),t.jsx(i.aY,{children:t.jsx(d.h,{width:"100%",height:300,children:(0,t.jsxs)(u.T,{data:K,children:[t.jsx(x.q,{strokeDasharray:"3 3"}),t.jsx(m.K,{dataKey:"time"}),t.jsx(h.Q,{}),t.jsx(j.u,{}),t.jsx(p.uN,{type:"monotone",dataKey:"responseTime",stroke:"#f59e0b",fill:"#fbbf24",name:"Response Time (ms)"})]})})})]}),(0,t.jsxs)(i.Zb,{children:[t.jsx(i.Ol,{children:(0,t.jsxs)(i.ll,{className:"flex items-center",children:[t.jsx(Z.Z,{className:"h-5 w-5 mr-2"}),"Database Connections"]})}),t.jsx(i.aY,{children:t.jsx(d.h,{width:"100%",height:300,children:(0,t.jsxs)(g.v,{data:K,children:[t.jsx(x.q,{strokeDasharray:"3 3"}),t.jsx(m.K,{dataKey:"time"}),t.jsx(h.Q,{}),t.jsx(j.u,{}),t.jsx(N.$,{dataKey:"connections",fill:"#8b5cf6",name:"Active Connections"})]})})})]}),(0,t.jsxs)(i.Zb,{children:[t.jsx(i.Ol,{children:(0,t.jsxs)(i.ll,{className:"flex items-center",children:[t.jsx(k.Z,{className:"h-5 w-5 mr-2"}),"Storage Usage"]})}),t.jsx(i.aY,{children:t.jsx(d.h,{width:"100%",height:300,children:(0,t.jsxs)(u.T,{data:K,children:[t.jsx(x.q,{strokeDasharray:"3 3"}),t.jsx(m.K,{dataKey:"time"}),t.jsx(h.Q,{}),t.jsx(j.u,{}),t.jsx(p.uN,{type:"monotone",dataKey:"storage",stroke:"#ef4444",fill:"#fca5a5",name:"Storage %"})]})})})]})]}),A.length>0&&(0,t.jsxs)(i.Zb,{children:[t.jsx(i.Ol,{children:(0,t.jsxs)(i.ll,{className:"flex items-center",children:[t.jsx(y.Z,{className:"h-5 w-5 mr-2"}),"Active Alerts"]})}),t.jsx(i.aY,{children:t.jsx("div",{className:"space-y-3",children:A.map(e=>t.jsx(c.bZ,{className:`border-l-4 ${"critical"===e.type?"border-red-500":"warning"===e.type?"border-yellow-500":"border-blue-500"}`,children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:["critical"===e.type?t.jsx(v.Z,{className:"h-5 w-5 text-red-600"}):t.jsx(y.Z,{className:"h-5 w-5 text-yellow-600"}),(0,t.jsxs)("div",{children:[t.jsx(c.X,{className:"font-medium",children:e.message}),t.jsx("p",{className:"text-sm text-gray-600",children:new Date(e.timestamp).toLocaleString()})]})]}),t.jsx(l.C,{variant:"critical"===e.type?"destructive":"secondary",children:e.type})]})},e.id))})})]})]})}},30637:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>x,metadata:()=>o});var t=a(19510),r=a(68570);let i=(0,r.createProxy)(String.raw`C:\Users\amand\Rafael\aifisio\fisioflow-aistudio\lib\monitoring\dashboard.tsx#MonitoringDashboard`);(0,r.createProxy)(String.raw`C:\Users\amand\Rafael\aifisio\fisioflow-aistudio\lib\monitoring\dashboard.tsx#default`);var l=a(46697),n=a(88278),c=a(1112),d=a(83218);let o={title:"Neon DB Monitoring | FisioFlow",description:"Real-time monitoring dashboard for Neon database performance and health metrics"};function x(){return(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx(n.Z,{className:"h-8 w-8 text-blue-600"}),(0,t.jsxs)("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Database Monitoring"}),t.jsx("p",{className:"text-gray-600",children:"Monitor Neon DB performance, health, and alerts in real-time"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,t.jsxs)(l.Zb,{children:[(0,t.jsxs)(l.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(l.ll,{className:"text-sm font-medium",children:"Database Provider"}),t.jsx(n.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(l.aY,{children:[t.jsx("div",{className:"text-2xl font-bold",children:"Neon DB"}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Serverless PostgreSQL"})]})]}),(0,t.jsxs)(l.Zb,{children:[(0,t.jsxs)(l.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(l.ll,{className:"text-sm font-medium",children:"Monitoring Status"}),t.jsx(c.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(l.aY,{children:[t.jsx("div",{className:"text-2xl font-bold text-green-600",children:"Active"}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Real-time monitoring enabled"})]})]}),(0,t.jsxs)(l.Zb,{children:[(0,t.jsxs)(l.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(l.ll,{className:"text-sm font-medium",children:"Security"}),t.jsx(d.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(l.aY,{children:[t.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"Protected"}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"RLS & Auth enabled"})]})]})]})]}),t.jsx(i,{className:"w-full"}),(0,t.jsxs)("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)(l.Zb,{children:[t.jsx(l.Ol,{children:t.jsx(l.ll,{children:"Monitoring Features"})}),t.jsx(l.aY,{children:(0,t.jsxs)("ul",{className:"space-y-2 text-sm",children:[(0,t.jsxs)("li",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),t.jsx("span",{children:"Real-time performance metrics"})]}),(0,t.jsxs)("li",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),t.jsx("span",{children:"Connection pool monitoring"})]}),(0,t.jsxs)("li",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),t.jsx("span",{children:"Automated alerting system"})]}),(0,t.jsxs)("li",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),t.jsx("span",{children:"Storage usage tracking"})]}),(0,t.jsxs)("li",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),t.jsx("span",{children:"Error rate monitoring"})]})]})})]}),(0,t.jsxs)(l.Zb,{children:[t.jsx(l.Ol,{children:t.jsx(l.ll,{children:"Alert Thresholds"})}),t.jsx(l.aY,{children:(0,t.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{children:"CPU Usage:"}),t.jsx("span",{className:"font-medium",children:"80% (Warning) / 96% (Critical)"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Memory Usage:"}),t.jsx("span",{className:"font-medium",children:"85% (Warning) / 95% (Critical)"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Connection Pool:"}),t.jsx("span",{className:"font-medium",children:"90% (Warning) / 98% (Critical)"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Response Time:"}),t.jsx("span",{className:"font-medium",children:"1000ms (Warning) / 2000ms (Critical)"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Error Rate:"}),t.jsx("span",{className:"font-medium",children:"5% (Warning) / 10% (Critical)"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Storage Usage:"}),t.jsx("span",{className:"font-medium",children:"90% (Warning) / 95% (Critical)"})]})]})})]})]})]})}},46697:(e,s,a)=>{"use strict";a.d(s,{Ol:()=>n,Zb:()=>l,aY:()=>d,ll:()=>c});var t=a(19510),r=a(71159),i=a(50650);let l=r.forwardRef(({className:e,...s},a)=>t.jsx("div",{ref:a,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));l.displayName="Card";let n=r.forwardRef(({className:e,...s},a)=>t.jsx("div",{ref:a,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...s}));n.displayName="CardHeader";let c=r.forwardRef(({className:e,...s},a)=>t.jsx("h3",{ref:a,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...s}));c.displayName="CardTitle",r.forwardRef(({className:e,...s},a)=>t.jsx("p",{ref:a,className:(0,i.cn)("text-sm text-muted-foreground",e),...s})).displayName="CardDescription";let d=r.forwardRef(({className:e,...s},a)=>t.jsx("div",{ref:a,className:(0,i.cn)("p-6 pt-0",e),...s}));d.displayName="CardContent",r.forwardRef(({className:e,...s},a)=>t.jsx("div",{ref:a,className:(0,i.cn)("flex items-center p-6 pt-0",e),...s})).displayName="CardFooter"},50650:(e,s,a)=>{"use strict";a.d(s,{cn:()=>i});var t=a(55761),r=a(62386);function i(...e){return(0,r.m6)((0,t.W)(e))}}};var s=require("../../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),t=s.X(0,[216,237,119],()=>a(62529));module.exports=t})();