(()=>{var e={};e.id=232,e.ids=[232],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},61212:e=>{"use strict";e.exports=require("async_hooks")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74026:e=>{"use strict";e.exports=require("string_decoder")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},62529:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>h,tree:()=>d}),t(41119),t(32773),t(43188),t(35866);var a=t(23191),r=t(88716),i=t(37922),l=t.n(i),n=t(95231),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);t.d(s,c);let d=["",{children:["admin",{children:["monitoring",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,41119)),"C:\\Users\\amand\\Rafael\\aifisio\\fisioflow-aistudio\\app\\admin\\monitoring\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,32773)),"C:\\Users\\amand\\Rafael\\aifisio\\fisioflow-aistudio\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,43188)),"C:\\Users\\amand\\Rafael\\aifisio\\fisioflow-aistudio\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Users\\amand\\Rafael\\aifisio\\fisioflow-aistudio\\app\\admin\\monitoring\\page.tsx"],x="/admin/monitoring/page",m={require:t,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/monitoring/page",pathname:"/admin/monitoring",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},22277:(e,s,t)=>{Promise.resolve().then(t.bind(t,68344))},68344:(e,s,t)=>{"use strict";t.d(s,{MonitoringDashboard:()=>k});var a=t(10326),r=t(17577),i=t(33071),l=t(567),n=t(90772),c=t(43273),d=t(30660),o=t(14958),x=t(18423),m=t(62637),h=t(12062),j=t(3950),u=t(72462),p=t(10669),f=t(80679),g=t(49844),N=t(59855),y=t(30361),b=t(50949),w=t(69669),v=t(66697),C=t(21405),Z=t(88319),q=t(71208),P=t(3634),R=t(55002);function k({className:e}){let[s,t]=(0,r.useState)([]),[k,A]=(0,r.useState)([]),[S,M]=(0,r.useState)({status:"healthy",activeAlerts:0,lastMetrics:null}),[U,_]=(0,r.useState)(!0),[D,K]=(0,r.useState)(!0),T=async()=>{try{let[e,s,a]=await Promise.all([fetch("/api/neon/metrics?action=getMetrics&limit=50"),fetch("/api/neon/metrics?action=getAlerts"),fetch("/api/neon/metrics?action=getHealth")]);if(e.ok){let s=await e.json();t(s.metrics||[])}if(s.ok){let e=await s.json();A(e.alerts||[])}if(a.ok){let e=await a.json();M(e.health||{status:"healthy",activeAlerts:0,lastMetrics:null})}}catch(e){console.error("Erro ao buscar dados do monitoramento:",e)}finally{_(!1)}},Y=s.map(e=>({time:new Date(e.timestamp).toLocaleTimeString(),cpu:e.compute.cpu,memory:e.compute.memory/1024,connections:e.database.connections.active,responseTime:e.api.responseTime,errorRate:e.database.performance.errorRate,storage:e.database.storage.percentage})),E=S.lastMetrics;return U?(0,a.jsxs)("div",{className:"flex items-center justify-center h-64",children:[a.jsx(C.Z,{className:"h-8 w-8 animate-spin"}),a.jsx("span",{className:"ml-2",children:"Carregando m\xe9tricas..."})]}):(0,a.jsxs)("div",{className:`space-y-6 ${e}`,children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx(Z.Z,{className:"h-8 w-8 text-blue-600"}),(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Neon DB Monitoring"}),a.jsx("p",{className:"text-gray-600",children:"Real-time database performance metrics"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)(n.z,{variant:D?"default":"outline",onClick:()=>K(!D),size:"sm",children:[a.jsx(C.Z,{className:`h-4 w-4 mr-2 ${D?"animate-spin":""}`}),"Auto Refresh"]}),(0,a.jsxs)(n.z,{onClick:T,variant:"outline",size:"sm",children:[a.jsx(C.Z,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsx(i.Zb,{children:a.jsx(i.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Status Geral"}),a.jsx("p",{className:`text-2xl font-bold ${(e=>{switch(e){case"healthy":return"text-green-600";case"warning":return"text-yellow-600";case"critical":return"text-red-600";default:return"text-gray-600"}})(S.status)}`,children:S.status.charAt(0).toUpperCase()+S.status.slice(1)})]}),(e=>{switch(e){case"healthy":return a.jsx(y.Z,{className:"h-5 w-5 text-green-600"});case"warning":return a.jsx(b.Z,{className:"h-5 w-5 text-yellow-600"});case"critical":return a.jsx(w.Z,{className:"h-5 w-5 text-red-600"});default:return a.jsx(v.Z,{className:"h-5 w-5 text-gray-600"})}})(S.status)]})})}),a.jsx(i.Zb,{children:a.jsx(i.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Alertas Ativos"}),a.jsx("p",{className:"text-2xl font-bold",children:S.activeAlerts})]}),a.jsx(b.Z,{className:"h-5 w-5 text-yellow-600"})]})})}),a.jsx(i.Zb,{children:a.jsx(i.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"CPU Usage"}),(0,a.jsxs)("p",{className:"text-2xl font-bold",children:[E?.compute.cpu||0,"%"]})]}),a.jsx(q.Z,{className:"h-5 w-5 text-blue-600"})]})})}),a.jsx(i.Zb,{children:a.jsx(i.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Connections"}),a.jsx("p",{className:"text-2xl font-bold",children:E?.database.connections.active||0})]}),a.jsx(Z.Z,{className:"h-5 w-5 text-green-600"})]})})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(i.Zb,{children:[a.jsx(i.Ol,{children:(0,a.jsxs)(i.ll,{className:"flex items-center",children:[a.jsx(q.Z,{className:"h-5 w-5 mr-2"}),"CPU & Memory Usage"]})}),a.jsx(i.aY,{children:a.jsx(d.h,{width:"100%",height:300,children:(0,a.jsxs)(o.w,{data:Y,children:[a.jsx(x.q,{strokeDasharray:"3 3"}),a.jsx(m.K,{dataKey:"time"}),a.jsx(h.Q,{}),a.jsx(j.u,{}),a.jsx(u.x,{type:"monotone",dataKey:"cpu",stroke:"#3b82f6",name:"CPU %"}),a.jsx(u.x,{type:"monotone",dataKey:"memory",stroke:"#10b981",name:"Memory GB"})]})})})]}),(0,a.jsxs)(i.Zb,{children:[a.jsx(i.Ol,{children:(0,a.jsxs)(i.ll,{className:"flex items-center",children:[a.jsx(P.Z,{className:"h-5 w-5 mr-2"}),"Response Time"]})}),a.jsx(i.aY,{children:a.jsx(d.h,{width:"100%",height:300,children:(0,a.jsxs)(p.T,{data:Y,children:[a.jsx(x.q,{strokeDasharray:"3 3"}),a.jsx(m.K,{dataKey:"time"}),a.jsx(h.Q,{}),a.jsx(j.u,{}),a.jsx(f.uN,{type:"monotone",dataKey:"responseTime",stroke:"#f59e0b",fill:"#fbbf24",name:"Response Time (ms)"})]})})})]}),(0,a.jsxs)(i.Zb,{children:[a.jsx(i.Ol,{children:(0,a.jsxs)(i.ll,{className:"flex items-center",children:[a.jsx(Z.Z,{className:"h-5 w-5 mr-2"}),"Database Connections"]})}),a.jsx(i.aY,{children:a.jsx(d.h,{width:"100%",height:300,children:(0,a.jsxs)(g.v,{data:Y,children:[a.jsx(x.q,{strokeDasharray:"3 3"}),a.jsx(m.K,{dataKey:"time"}),a.jsx(h.Q,{}),a.jsx(j.u,{}),a.jsx(N.$,{dataKey:"connections",fill:"#8b5cf6",name:"Active Connections"})]})})})]}),(0,a.jsxs)(i.Zb,{children:[a.jsx(i.Ol,{children:(0,a.jsxs)(i.ll,{className:"flex items-center",children:[a.jsx(R.Z,{className:"h-5 w-5 mr-2"}),"Storage Usage"]})}),a.jsx(i.aY,{children:a.jsx(d.h,{width:"100%",height:300,children:(0,a.jsxs)(p.T,{data:Y,children:[a.jsx(x.q,{strokeDasharray:"3 3"}),a.jsx(m.K,{dataKey:"time"}),a.jsx(h.Q,{}),a.jsx(j.u,{}),a.jsx(f.uN,{type:"monotone",dataKey:"storage",stroke:"#ef4444",fill:"#fca5a5",name:"Storage %"})]})})})]})]}),k.length>0&&(0,a.jsxs)(i.Zb,{children:[a.jsx(i.Ol,{children:(0,a.jsxs)(i.ll,{className:"flex items-center",children:[a.jsx(b.Z,{className:"h-5 w-5 mr-2"}),"Active Alerts"]})}),a.jsx(i.aY,{children:a.jsx("div",{className:"space-y-3",children:k.map(e=>a.jsx(c.bZ,{className:`border-l-4 ${"critical"===e.type?"border-red-500":"warning"===e.type?"border-yellow-500":"border-blue-500"}`,children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:["critical"===e.type?a.jsx(w.Z,{className:"h-5 w-5 text-red-600"}):a.jsx(b.Z,{className:"h-5 w-5 text-yellow-600"}),(0,a.jsxs)("div",{children:[a.jsx(c.X,{className:"font-medium",children:e.message}),a.jsx("p",{className:"text-sm text-gray-600",children:new Date(e.timestamp).toLocaleString()})]})]}),a.jsx(l.C,{variant:"critical"===e.type?"destructive":"secondary",children:e.type})]})},e.id))})})]})]})}},41119:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>p,metadata:()=>u});var a=t(19510),r=t(68570);let i=(0,r.createProxy)(String.raw`C:\Users\amand\Rafael\aifisio\fisioflow-aistudio\lib\monitoring\dashboard.tsx#MonitoringDashboard`);(0,r.createProxy)(String.raw`C:\Users\amand\Rafael\aifisio\fisioflow-aistudio\lib\monitoring\dashboard.tsx#default`);var l=t(71159),n=t(50650);let c=l.forwardRef(({className:e,...s},t)=>a.jsx("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));c.displayName="Card";let d=l.forwardRef(({className:e,...s},t)=>a.jsx("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...s}));d.displayName="CardHeader";let o=l.forwardRef(({className:e,...s},t)=>a.jsx("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",e),...s}));o.displayName="CardTitle",l.forwardRef(({className:e,...s},t)=>a.jsx("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",e),...s})).displayName="CardDescription";let x=l.forwardRef(({className:e,...s},t)=>a.jsx("div",{ref:t,className:(0,n.cn)("p-6 pt-0",e),...s}));x.displayName="CardContent",l.forwardRef(({className:e,...s},t)=>a.jsx("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",e),...s})).displayName="CardFooter";var m=t(88278),h=t(1112),j=t(83218);let u={title:"Neon DB Monitoring | FisioFlow",description:"Real-time monitoring dashboard for Neon database performance and health metrics"};function p(){return(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx(m.Z,{className:"h-8 w-8 text-blue-600"}),(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Database Monitoring"}),a.jsx("p",{className:"text-gray-600",children:"Monitor Neon DB performance, health, and alerts in real-time"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,a.jsxs)(c,{children:[(0,a.jsxs)(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(o,{className:"text-sm font-medium",children:"Database Provider"}),a.jsx(m.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(x,{children:[a.jsx("div",{className:"text-2xl font-bold",children:"Neon DB"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Serverless PostgreSQL"})]})]}),(0,a.jsxs)(c,{children:[(0,a.jsxs)(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(o,{className:"text-sm font-medium",children:"Monitoring Status"}),a.jsx(h.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(x,{children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:"Active"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Real-time monitoring enabled"})]})]}),(0,a.jsxs)(c,{children:[(0,a.jsxs)(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(o,{className:"text-sm font-medium",children:"Security"}),a.jsx(j.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(x,{children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"Protected"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"RLS & Auth enabled"})]})]})]})]}),a.jsx(i,{className:"w-full"}),(0,a.jsxs)("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(c,{children:[a.jsx(d,{children:a.jsx(o,{children:"Monitoring Features"})}),a.jsx(x,{children:(0,a.jsxs)("ul",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("li",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),a.jsx("span",{children:"Real-time performance metrics"})]}),(0,a.jsxs)("li",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),a.jsx("span",{children:"Connection pool monitoring"})]}),(0,a.jsxs)("li",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),a.jsx("span",{children:"Automated alerting system"})]}),(0,a.jsxs)("li",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),a.jsx("span",{children:"Storage usage tracking"})]}),(0,a.jsxs)("li",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),a.jsx("span",{children:"Error rate monitoring"})]})]})})]}),(0,a.jsxs)(c,{children:[a.jsx(d,{children:a.jsx(o,{children:"Alert Thresholds"})}),a.jsx(x,{children:(0,a.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{children:"CPU Usage:"}),a.jsx("span",{className:"font-medium",children:"80% (Warning) / 96% (Critical)"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Memory Usage:"}),a.jsx("span",{className:"font-medium",children:"85% (Warning) / 95% (Critical)"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Connection Pool:"}),a.jsx("span",{className:"font-medium",children:"90% (Warning) / 98% (Critical)"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Response Time:"}),a.jsx("span",{className:"font-medium",children:"1000ms (Warning) / 2000ms (Critical)"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Error Rate:"}),a.jsx("span",{className:"font-medium",children:"5% (Warning) / 10% (Critical)"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Storage Usage:"}),a.jsx("span",{className:"font-medium",children:"90% (Warning) / 95% (Critical)"})]})]})})]})]})]})}},50650:(e,s,t)=>{"use strict";t.d(s,{cn:()=>i});var a=t(55761),r=t(62386);function i(...e){return(0,r.m6)((0,a.W)(e))}}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[216,237,305],()=>t(62529));module.exports=a})();