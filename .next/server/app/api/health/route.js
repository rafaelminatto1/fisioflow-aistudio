"use strict";(()=>{var e={};e.id=829,e.ids=[829],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},78893:e=>{e.exports=require("buffer")},17702:e=>{e.exports=require("events")},92048:e=>{e.exports=require("fs")},32615:e=>{e.exports=require("http")},35240:e=>{e.exports=require("https")},19801:e=>{e.exports=require("os")},55315:e=>{e.exports=require("path")},76162:e=>{e.exports=require("stream")},74026:e=>{e.exports=require("string_decoder")},21764:e=>{e.exports=require("util")},71568:e=>{e.exports=require("zlib")},66605:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>d,patchFetch:()=>g,requestAsyncStorage:()=>h,routeModule:()=>l,serverHooks:()=>m,staticGenerationAsyncStorage:()=>p});var s={};r.r(s),r.d(s,{GET:()=>c,HEAD:()=>u});var a=r(49303),o=r(88716),n=r(60670),i=r(87070);let c=(0,r(16836).cj)();async function u(){return new i.NextResponse(null,{status:200})}let l=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/health/route",pathname:"/api/health",filename:"route",bundlePath:"app/api/health/route"},resolvedPagePath:"C:\\Users\\amand\\Rafael\\aifisio\\fisioflow-aistudio\\app\\api\\health\\route.ts",nextConfigOutput:"standalone",userland:s}),{requestAsyncStorage:h,staticGenerationAsyncStorage:p,serverHooks:m}=l,d="/api/health/route";function g(){return(0,n.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:p})}},16836:(e,t,r)=>{r.d(t,{M3:()=>n,cj:()=>c});var s=r(87070),a=r(73077),o=r(67754);async function n(e,t,r){return(0,o.O$)(`external.${e}.${t}`,r)}async function i(e,t){let r=Date.now();return{result:await t(),duration:Date.now()-r}}function c(){var e;return e=async e=>{let t=await i("health.check",async()=>{let e=process.memoryUsage(),t=process.uptime(),r={database:{status:"unknown",responseTime:0},redis:{status:"unknown",responseTime:0},memory:{status:e.heapUsed/e.heapTotal<.9?"healthy":"warning",usage:{used:Math.round(e.heapUsed/1024/1024),total:Math.round(e.heapTotal/1024/1024),percentage:Math.round(e.heapUsed/e.heapTotal*100)}},system:{status:"healthy",nodeVersion:process.version,platform:process.platform}};try{let{duration:e}=await i("database.ping",async()=>(await new Promise(e=>setTimeout(e,10)),!0));r.database={status:"healthy",responseTime:e}}catch(e){r.database={status:"unhealthy",responseTime:0,error:e.message}}try{let{duration:e}=await i("redis.ping",async()=>(await new Promise(e=>setTimeout(e,5)),!0));r.redis={status:"healthy",responseTime:e}}catch(e){r.redis={status:"unhealthy",responseTime:0,error:e.message}}return{status:Object.values(r).every(e=>"healthy"===e.status)?"healthy":"unhealthy",timestamp:new Date().toISOString(),uptime:Math.round(t),version:process.env.npm_package_version||"1.0.0",environment:"production",checks:r}});return s.NextResponse.json({...t.result,responseTime:t.duration})},async t=>{let r;let n=Date.now(),i=process.memoryUsage(),c=t.method||"GET",u=t.url||"",l=t.headers.get("user-agent")||"unknown",h=t.headers.get("x-forwarded-for")||t.headers.get("x-real-ip")||"unknown",p=200;try{p=(r=await (0,o.O$)(`api.${c.toLowerCase()}.${u.split("?")[0]}`,()=>e(t))).status,o.B1.recordAPICall(u,c,p)}catch(e){p=500,a.aw.error("API handler error",{method:c,url:u,error:e.message,stack:e.stack,userAgent:l,ip:h}),r=s.NextResponse.json({error:"Internal Server Error"},{status:500})}let m=Date.now()-n,d=process.memoryUsage(),g={rss:d.rss-i.rss,heapTotal:d.heapTotal-i.heapTotal,heapUsed:d.heapUsed-i.heapUsed,external:d.external-i.external};return a.aw.logAPICall(c,u,p,m,{ip:h,userAgent:l,memoryDelta:g}),r.headers.set("X-Response-Time",`${m}ms`),r.headers.set("X-Memory-Usage",JSON.stringify(g)),m>1e3&&a.aw.warn("Slow API request detected",{method:c,url:u,duration:m,statusCode:p,memoryDelta:g}),r}}},73077:(e,t,r)=>{r.d(t,{aw:()=>u});var s=r(94624),a=r.n(s);a().addColors({error:"red",warn:"yellow",info:"green",http:"magenta",debug:"white"}),a().format.combine(a().format.timestamp({format:"YYYY-MM-DD HH:mm:ss:ms"}),a().format.colorize({all:!0}),a().format.printf(e=>{let{timestamp:t,level:r,message:s,...a}=e,o=Object.keys(a).length?JSON.stringify(a,null,2):"";return`${t} [${r}]: ${s} ${o}`}));let o=a().format.combine(a().format.timestamp(),a().format.errors({stack:!0}),a().format.json()),n=[];n.push(new(a()).transports.Console({format:o})),n.push(new(a()).transports.File({filename:"logs/error.log",level:"error",format:o}),new(a()).transports.File({filename:"logs/combined.log",format:o}));let i=a().createLogger({level:process.env.LOG_LEVEL||"info",levels:{error:0,warn:1,info:2,http:3,debug:4},format:o,transports:n,exitOnError:!1});class c{constructor(e){this.baseLogger=e}log(e,t,r){this.baseLogger.log(e,t,r)}error(e,t){this.log("error",e,t)}warn(e,t){this.log("warn",e,t)}info(e,t){this.log("info",e,t)}http(e,t){this.log("http",e,t)}debug(e,t){this.log("debug",e,t)}logAPICall(e,t,r,s,a){this.http(`${e} ${t} ${r}`,{...a,method:e,url:t,statusCode:r,duration:s})}logDatabaseQuery(e,t,r){this.debug("Database query executed",{...r,query:e.substring(0,100)+(e.length>100?"...":""),duration:t})}logCacheOperation(e,t,r){this.debug(`Cache ${e}`,{...r,operation:e,key:t})}logBusinessEvent(e,t,r){this.info(`Business event: ${e}`,{...r,event:e,...t})}logSecurityEvent(e,t,r){this.warn(`Security event: ${e}`,{...r,event:e,...t})}}let u=new c(i)},67754:(e,t,r)=>{r.d(t,{B1:()=>n,O$:()=>i});var s=r(73077);class a{record(e,t,r="count",s={}){this.metrics.push({name:e,value:t,unit:r,timestamp:new Date,tags:s}),this.metrics.length>1e3&&(this.metrics=this.metrics.slice(-1e3))}recordPerformance(e,t,r="success",s){this.performanceMetrics.push({operation:e,duration:t,status:r,metadata:s}),this.performanceMetrics.length>500&&(this.performanceMetrics=this.performanceMetrics.slice(-500))}getSummary(){let e=this.metrics.length,t=this.performanceMetrics.length,r=this.performanceMetrics.filter(e=>"success"===e.status),s=r.length>0?r.reduce((e,t)=>e+t.duration,0)/r.length:0,a=t>0?this.performanceMetrics.filter(e=>"error"===e.status).length/t*100:0;return{totalMetrics:e,totalPerformanceMetrics:t,averageResponseTime:Math.round(100*s)/100,errorRate:Math.round(100*a)/100}}getRecentMetrics(e=50){return this.metrics.slice(-e)}getRecentPerformanceMetrics(e=50){return this.performanceMetrics.slice(-e)}clear(){this.metrics=[],this.performanceMetrics=[]}constructor(){this.metrics=[],this.performanceMetrics=[]}}let o=new a;class n{static recordAPICall(e,t,r){o.record("api_calls_total",1,"count",{endpoint:e,method:t,status:r.toString()}),s.aw.http("API call recorded",{endpoint:e,method:t,statusCode:r,timestamp:new Date().toISOString()})}static recordBusinessEvent(e,t={}){o.record("business_events",1,"count",{eventType:e,...t}),s.aw.info("Business event recorded",{eventType:e,metadata:t,timestamp:new Date().toISOString()})}static recordSecurityEvent(e,t){o.record("security_events",1,"count",{type:e,severity:t}),s.aw.logSecurityEvent("Security event recorded",{type:e,severity:t,timestamp:new Date().toISOString()})}static recordPerformance(e,t,r="success"){o.recordPerformance(e,t,r),s.aw.info("Performance recorded",{operation:e,duration:t,status:r,timestamp:new Date().toISOString()})}}async function i(e,t){let r=Date.now();try{let s=await t(),a=Date.now()-r;return n.recordPerformance(e,a,"success"),s}catch(s){let t=Date.now()-r;throw n.recordPerformance(e,t,"error"),s}}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[216],()=>r(66605));module.exports=s})();